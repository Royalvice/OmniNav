# OmniNav Main Configuration
# Uses Hydra composition: https://hydra.cc/docs/patterns/extending_configs/

defaults:
  - robot: go2
  - sensor: default
  - locomotion: kinematic_gait
  - algorithm: inspection
  - task: inspection
  - scene: empty
  - _self_

# Simulation configuration
simulation:
  dt: 0.01           # Simulation time step (seconds)
  substeps: 2        # Physics substeps
  backend: "gpu"     # "gpu" or "cpu"
  n_envs: 1          # Number of parallel environments
  show_viewer: true  # Whether to show visualization window
  enable_self_collision: false
  camera_pos: [2.0, 0.0, 2.5]
  camera_lookat: [0.0, 0.0, 0.0]
  camera_fov: 40
  env_spacing: [1.0, 1.0]  # Parallel environment spacing

# ROS2 integration
ros2:
  enabled: false
  node_name: "omninav"
  control_source: "python"      # "python" | "ros2"
  profile: "all_off"            # "all_off" | "nav2_minimal" | "nav2_full" | "rviz_sensors" | "custom"
  namespace_mode: "single"      # "single" | "per_env"
  env_namespace_prefix: "/env"
  cmd_vel_timeout_sec: 0.5
  topics:
    clock: "/clock"
    tf: "/tf"
    tf_static: "/tf_static"
    odom: "/odom"
    scan: "/scan"
    rgb_image: "/camera/rgb/image_raw"
    depth_image: "/camera/depth/image_raw"
    rgb_camera_info: "/camera/rgb/camera_info"
    depth_camera_info: "/camera/depth/camera_info"
    cmd_vel_in: "/cmd_vel"
    cmd_vel_out: "/omninav/cmd_vel"
  frames:
    map: "map"
    odom: "odom"
    base_link: "base_link"
    lidar: "lidar_frame"
    rgb_camera: "camera_rgb_frame"
    depth_camera: "camera_depth_frame"
  # Optional explicit per-topic switches.
  # Keep empty by default so `ros2.profile` remains the single source of truth.
  publish: {}
  # Optional publish down-sampling (1 = publish every step).
  publish_rate:
    scan_every_n_steps: 1
    rgb_every_n_steps: 1
    depth_every_n_steps: 1
    camera_info_every_n_steps: 1
  qos: {}

# Hydra configuration
hydra:
  run:
    dir: outputs/${now:%Y-%m-%d}/${now:%H-%M-%S}
  sweep:
    dir: multirun/${now:%Y-%m-%d}/${now:%H-%M-%S}
  job:
    chdir: false
